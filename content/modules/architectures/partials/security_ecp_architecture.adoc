.SAML ECP Architecture
[ditaa,security_ecp_architecture,png]
....
+---------------------------------------------------------------------------------------------------------------------+
|                                                                                                                     |
|                                                                                                                     |
|                                                                                                                     |
|        +------------------------------------------------+         +----------------------------------------+        |
|        |                                                |         |                                        |        |
|        |                                                |         |                                        |        |
|        |                                                |         |                                        |        |
|        |             Service Provider (SP)              |         |                                        |        |
|        |                                                |         |                                        |        |
|        |                                                |         |                                        |        |
|        |                  +-------------------+         |         |                                        |        |
|        |                  |cDEF               |         |         |                                        |        |
|        |                  |     IdP Client    |         |         |        Identity Provider (IdP)         |        |
|        |                  |                   |         |         |                                        |        |
|        |                  +---------+---------+         |         |                                        |        |
|        |                  |         |         |         |         |                                        |        |
|        |                  | Handler |   ACS   |         |         |                                        |        |
|        |                  |         |         |         |         |                                        |        |
|        |                  |cDEF     |cDEF     |         |         |                                        |        |
|        |                  +----+----+--+------+         |         |                                        |        |
|        |                       |       ^                |         |                                        |        |
|        +-+-----------+----------------------------------+         +-----+------+---------------------------+        |
|          ^           |         |       |                                |      ^                                    |
|          |           |         |       |5                               |      |                                    |
|          |1          |         |       |Signed Response                 |      |                                    |
|          |Access     |         |       |In PAOS Response                |      |3                                   |
|          |Resource   |         |       |                                |      |AuthNRequest                        |
|          |           |         |       |                               4|      |In SOAP Request                     |
|          |          6|         |       \---------\      Signed Response |      |                                    |
|          |    Supply |         |2                |      In SOAP Response|      |                                    |
|          |   Resource|         |AuthNRequest     |                      |      |                                    |
|          |           |         |In PAOS Request  |                      |      |                                    |
|          |           |         |                 |                      |      |                                    |
|          |           v         |                 |                      |      |                                    |
|        +-+-------------------------------------------------------------------------------------------------+        |
|        |                       |                 |                      |      |                           |        |
|        |                       v                 |                      v      |                           |        |
|        |                      +------------------+-----------------------------+-+                         |        |
|        |   SAML ECP Aware     |                SOAP Intermediary                 |                         |        |
|        |   Secure Client      |cDEF            (CXF Interceptor)                 |                         |        |
|        |                      +--------------------------------------------------+                         |        |
|        |                                                                                                   |        |
|        +---------------------------------------------------------------------------------------------------+        |
|                                                                                                                     |
+---------------------------------------------------------------------------------------------------------------------+
....
